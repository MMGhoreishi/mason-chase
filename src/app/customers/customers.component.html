<div class="col-3 col-3-5 pr-3">
  <select
    class="form-control form-control-borderless form-control-select px-0"
    formControlName="countryCode"
    (change)="setCountryCode($event.target.value)"
    [ngClass]="{
      error:
        form.value.countryCode === '' && form.controls['phoneNumber'].touched
    }"
    [required]="form.value.phoneNumber !== ''"
  >
    <option style="display: none"></option>
    <option value="90" [selected]="form.value.countryCode === '90'">+90</option>
    <option
      *ngFor="let countryCode of countryCodes"
      [value]="countryCode"
      [selected]="form.value.countryCode === countryCode"
    >
      +{{ countryCode }}
    </option>
  </select>
</div>

<div class="container py-5">
  <div class="row">
    <div class="col-12 text-center text-primary mb-5">
      <h1>My CRUD Task</h1>
    </div>
  </div>
  <div class="row mb-3">
    <div class="col-12">
      <form class="form" (ngSubmit)="addCustomer()" [formGroup]="customerForm">
        <div class="form-group mb-2">
          <input
            type="text"
            class="form-control"
            formControlName="Firstname"
            placeholder="firstname"
          />
          <span
            class="text-danger"
            *ngIf="
              (customerForm.controls['Firstname'].touched || submitted) &&
              customerForm.controls['Firstname'].errors?.required
            "
          >
            Firstname is required
          </span>
        </div>

        <div class="form-group mb-2">
          <input
            type="text"
            class="form-control"
            formControlName="Lastname"
            placeholder="Lastname"
          />
          <span
            class="text-danger"
            *ngIf="
              (customerForm.controls['Lastname'].touched || submitted) &&
              customerForm.controls['Lastname'].errors?.required
            "
          >
            Lastname is required
          </span>
        </div>

        <div class="form-group mb-2">
          <input
            type="date"
            class="form-control"
            formControlName="DateOfBirth"
            placeholder="DateOfBirth"
          />
          <span
            class="text-danger"
            *ngIf="
              (customerForm.controls['DateOfBirth'].touched || submitted) &&
              customerForm.controls['DateOfBirth'].errors?.required
            "
          >
            DateOfBirth is required
          </span>
        </div>

        <div class="form-group mb-2">
          <input
            type="number"
            class="form-control"
            formControlName="PhoneNumber"
            placeholder="PhoneNumber"
          />
          <span
            class="text-danger"
            *ngIf="
              (customerForm.controls['PhoneNumber'].touched || submitted) &&
              customerForm.controls['PhoneNumber'].errors?.required
            "
          >
            PhoneNumber is required
          </span>
        </div>

        <div class="form-group mb-2">
          <input
            type="text"
            class="form-control"
            formControlName="Email"
            placeholder="Email"
          />
          <span
            class="text-danger"
            *ngIf="
              (customerForm.controls['Email'].touched || submitted) &&
              customerForm.controls['Email'].errors?.required
            "
          >
            Email is required
          </span>
          <span
            class="text-danger"
            *ngIf="
              customerForm.controls['Email'].touched &&
              customerForm.controls['Email'].errors?.email
            "
          >
            Enter a valid email address
          </span>
        </div>

        <div class="form-group mb-2">
          <input
            type="number"
            class="form-control"
            formControlName="BankAccountNumber"
            placeholder="BankAccountNumber"
          />
          <span
            class="text-danger"
            *ngIf="
              (customerForm.controls['BankAccountNumber'].touched ||
                submitted) &&
              customerForm.controls['BankAccountNumber'].errors?.required
            "
          >
            BankAccountNumber is required
          </span>
        </div>

        <div class="form-group">
          <button type="submit" class="btn btn-success">Add Customer</button>
        </div>
      </form>
    </div>
  </div>

  <div class="row">
    <div class="col-12">
      <table class="table table-striped table-bordered table-hover">
        <thead class="table-info">
          <tr>
            <th>Firstname</th>
            <th>Lastname</th>
            <th>DateOfBirth</th>
            <th>PhoneNumber</th>
            <th>Email</th>
            <th>BankAccountNumber</th>
            <th>Edit</th>
            <th>Delete</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let customer of customers">
            <td>{{ customer.Firstname }}</td>
            <td>{{ customer.Lastname }}</td>
            <td>{{ customer.DateOfBirth }}</td>
            <td>{{ customer.PhoneNumber }}</td>
            <td>{{ customer.Email }}</td>
            <td>{{ customer.BankAccountNumber }}</td>
            <td>
              <button type="button" class="btn text-primary">
                <i class="bi bi-pencil-fill"></i>
              </button>
            </td>
            <td>
              <button
                type="button"
                class="btn text-danger"
                (click)="deleteCustomer(customer.Email)"
              >
                <i class="bi bi-trash3-fill"></i>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<!--

<div *ngIf="appState == 'edit'">
  <h3>Edit Todo</h3>
  <form (submit)="updateTodo()">
    <input type="text" [(ngModel)]="text" name="text" />
  </form>
</div>

<h3>Todo List</h3>
<ul *ngFor="let todo of todos">
  <span class="todoItem" (click)="editTodo(todo)">{{ todo.text }}</span
  ><button class="deleteBtn" (click)="deleteTodo(todo.text)">x</button>
</ul> -->
